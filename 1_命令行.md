## jps： 虚拟机进程状况工具

jps（ JVM Process Status Tool） ： 输出正在运行的**虚拟机进程**， 并显示虚拟机执行**主类**（ Main Class， main()函数所在的类） 名称 和 这些进程的**本地虚拟机唯一ID**（ LVMID， Local Virtual Machine Identifier）

### 默认查询

![image-20210221104700623](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221104700623.png)

### 输出本地虚拟机唯一ID -q

![image-20210221104735176](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221104735176.png)

### 输出主类函数的参数  -m

![image-20210221104759141](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221104759141.png)

### 输出主类的全名  -l

![image-20210221104845134](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221104845134.png)

### 输出JVM参数  -v

jps -v	**-v 输出虚拟机进程启动时的JVM参数**

![image-20210221105050103](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221105050103.png)

## jstat： 虚拟机统计信息监视工具

### 监视消耗时间  -class 

![image-20210221105337857](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221105337857.png)

### 监视堆状态 -gc

![image-20210221110639125](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221110639125.png)

### 各区百分比 -gcutil

![image-20210221111439409](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221111439409.png)

###  上次垃圾回收的原因 -gccause

jstat -gccause 19672 // -gccause 与-gcutil功能一样，但是会额外输出导致上一次垃圾收集产生的原因

![image-20210221111625091](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221111625091.png)

### 额外参数

-h3：每隔3次打印一下表头 -t：监视总运行时间 1000：每1秒执行一次  10：总打印十次

![image-20210221105756847](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221105756847.png)

## jinfo： Java配置信息工具

### 输出Java系统属性-sysparops 

![image-20210221113207462](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221113207462.png)

### 输出JVM的参数-flags

![image-20210221113241002](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221113241002.png)



## jmap： Java内存映像工具

jmap（ Memory Map for Java） : 生成**堆转储快照**（ 一般称为heapdump 或 dump 文件）

![image-20210221120715517](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221120715517.png)

### 导出内存映像文件 -dump

#### dump文件

![image-20210221123139161](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221123139161.png)

#### 手动导出：立即导出

导出所有对象

![image-20210221123339641](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221123339641.png)

live：只保存堆中存活对象

![image-20210221123517950](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221123517950.png)

#### 自动导出

![image-20210221123855848](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221123855848.png)

###  显示堆内存的相关信息-heap / -histo

-heap 

![image-20210221162947414](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221162947414.png)

![image-20210221163037242](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221163037242.png)

 -histo

![image-20210221163101304](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221163101304.png)

![image-20210221163109546](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221163109546.png)



### 小结

![image-20210221163703369](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221163703369.png)





## jhat：虚拟机堆转储快照分析工具

![image-20210221164721282](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221164721282.png)

![image-20210221164732216](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221164732216.png)

## jstack： jvm中线程快照

![image-20210221173055789](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221173055789.png)

![image-20210221173823661](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221173823661.png)



## jcmd：多功能命令行

![image-20210221175223471](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221175223471.png)

### 查看进程  -l

![image-20210221174757671](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221174757671.png)

### 查看线程 Thread.print

![image-20210221174816681](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221174816681.png)

### 查看内存信息 GC.class_histogram

![image-20210221174915694](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221174915694.png)

### 生成内存映像文件GC.heap_dump

![image-20210221175009393](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210221175009393.png)





